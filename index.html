<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPS</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="container">
        <div class="name">
            <span id="user" style="color: rgb(31, 172, 31);">Player</span>
            <span style="color: rgb(205, 11, 11);">Computer</span>
        </div>

        <div class="disp">
            <div class="human">ðŸ¤œ</div>
            <div class="text">
                <span id="comment">V/S</span>
                <span id="score">0 - 0</span>
            </div>
            <div class="comp">ðŸ¤›</div>
        </div>

        <div class="options">
            <span id="rock">ðŸ‘Š</span>
            <span id="paper">âœ‹</span>
            <span id="scissor">ðŸ––</span>
        </div>
        <button id="btn"><img src="re.svg" alt="retry"></button>
    </div>



    <script>
        let user_name = prompt("Enter Player Name")
        console.log(user_name)
        if (!user_name || user_name.trim() === "") {
            user_name = 'Player'
            document.querySelector("#user").innerHTML = user_name;
        } else {
            document.querySelector("#user").innerHTML = user_name;
        }
        let human = document.querySelector('.human')
        let comp = document.querySelector('.comp')
        let score = document.querySelector('#score')
        let scoreUser = 0;
        let scoreComp = 0;
        function game() {
            document.querySelector('#btn').hidden = true
            let comment = document.querySelector('#comment')
            let ran = Math.floor(Math.random() * 3)
            let options = ['ðŸ‘Š', 'âœ‹', 'ðŸ––']
            let res;
            function commentary() {
                let a = human.innerHTML
                let b = comp.innerHTML
                console.log(a, b)
                if (a == b) {
                    res = "Draw"
                }
                else if (a == 'ðŸ‘Š' && b == 'ðŸ––') {
                    res = `${user_name} Won`
                }
                else if (a == 'âœ‹' && b == 'ðŸ‘Š') {
                    res = `${user_name} Won`
                }
                else if (a == 'ðŸ––' && b == 'âœ‹') {
                    res = `${user_name} Won`
                }
                else {
                    res = "Computer Won"
                }
                comment.innerHTML = res
            }

            function Score() {
                if (res == `${user_name} Won`) {
                    scoreUser++
                }
                else if (res == "Computer Won") {
                    scoreComp++
                }

                score.textContent = `${scoreUser} - ${scoreComp}`

            }

            function handleEvent(symbol) {
                human.textContent = symbol
                comp.textContent = options[ran]


                rock.removeEventListener('click', handleRock)
                paper.removeEventListener('click', handlePaper)
                scissor.removeEventListener('click', handleScissor)
            }

            function handleRock() {
                handleEvent('ðŸ‘Š')
                commentary()
                Score()
                document.querySelector('#btn').hidden = false
            }
            function handlePaper() {
                handleEvent('âœ‹')
                commentary()
                Score()
                document.querySelector('#btn').hidden = false
            }
            function handleScissor() {
                handleEvent('ðŸ––')
                commentary()
                Score()
                document.querySelector('#btn').hidden = false
            }
            rock.addEventListener('click', handleRock)
            paper.addEventListener('click', handlePaper)
            scissor.addEventListener('click', handleScissor)

        }


        btn.addEventListener('click', () => {
            human.innerHTML = 'ðŸ¤œ'
            comp.innerHTML = 'ðŸ¤›'
            comment.innerHTML = 'V/S'
            game()
        })

        game()



    </script>
</body>

</html>